{"version":3,"file":"eventRecommendations.js","sourceRoot":"/","sources":["lib/recommendations/eventRecommendations.ts"],"names":[],"mappings":";;AAEA,MAAM,eAAe,GAAG,CAAC,EACvB,WAAW,EACX,MAAM,GAKP,EAAW,EAAE;IACZ,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,WAAW,CAAC;IAC7C,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;IAEzB,OAAO,MAAM;SACV,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,cAAqB,CAAC,GAAG,KAAK,CAAC;SAChE,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;QACb,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,MAAM,cAAc,GAClB,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAuB,CAAC,CAAC,OAAO,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;YACrE,CAAC,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC;QACrB,KAAK,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,cAAc,CAAC,CAAC;QAE1C,MAAM,YAAY,GAAG,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAY,EAAE,EAAE,CAC5D,KAAK,CAAC,WAAW,EAAE,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CACzC,CAAC;QACF,IAAI,YAAY;YAAE,KAAK,IAAI,CAAC,CAAC;QAE7B,IAAI,KAAK,CAAC,QAAQ,KAAK,WAAW,CAAC,QAAQ,EAAE,CAAC;YAC5C,KAAK,IAAI,CAAC,CAAC;QACb,CAAC;aAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;YAC3B,KAAK,IAAI,CAAC,CAAC;QACb,CAAC;QAaD,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;IAC1B,CAAC,CAAC;SACD,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC;SACjC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AACnC,CAAC,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import { Event, Skill } from \"@/common/constants\";\n\nconst recommendEvents = ({\n  currentUser,\n  events,\n}: {\n  currentUser: any;\n  // attendedEvents: Event[],\n  events: Event[];\n}): Event[] => {\n  const { profile: userProfile } = currentUser;\n  const today = new Date();\n\n  return events\n    .filter((event) => new Date(event.event_end_date as any) > today)\n    .map((event) => {\n      let score = 0;\n\n      const daysUntilEvent =\n        (new Date(event.event_start_date as any).getTime() - today.getTime()) /\n        (1000 * 3600 * 24);\n      score += Math.max(0, 10 - daysUntilEvent);\n\n      const skillMatches = userProfile.skills.some((skill: Skill) =>\n        event.description?.includes(skill.title)\n      );\n      if (skillMatches) score += 5;\n\n      if (event.location === userProfile.location) {\n        score += 3;\n      } else if (!event.location) {\n        score += 2;\n      }\n\n      // const similarEvent = attendedEvents.some(\n      //   (attended) =>\n      //     attended.title === event.title ||\n      //     attended.description.includes(event.description)\n      // );\n      // if (similarEvent) score += 4;\n\n      //  Mark event as will attend\n      // const popularityScore = Math.min(event.attendees?.length || 0, 100) / 10;\n      // score += popularityScore;\n\n      return { event, score };\n    })\n    .sort((a, b) => b.score - a.score)\n    .map((result) => result.event);\n};\n\nexport default recommendEvents;\n"]}