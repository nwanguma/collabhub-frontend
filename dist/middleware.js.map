{"version":3,"file":"middleware.js","sourceRoot":"/","sources":["middleware.ts"],"names":[],"mappings":";;;AAMA,gCAeC;AArBD,uCAAyC;AACzC,wCAA2C;AAKpC,KAAK,UAAU,UAAU,CAAC,GAAgB;IAC/C,MAAM,KAAK,GAAG,MAAM,IAAA,cAAQ,EAAC,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC;IAC3E,MAAM,WAAW,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;IAElE,IAAI,WAAW,IAAI,CAAC,KAAK,EAAE,CAAC;QAC1B,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;QAElC,OAAO,qBAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;IACpC,CAAC;IAED,IAAI,CAAC,WAAW,IAAI,KAAK,EAAE,CAAC;QAC1B,OAAO,qBAAY,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED,OAAO,qBAAY,CAAC,IAAI,EAAE,CAAC;AAC7B,CAAC;AAEY,QAAA,MAAM,GAAG;IACpB,OAAO,EAAE,CAAC,GAAG,EAAE,WAAW,EAAE,YAAY,EAAE,mBAAmB,CAAC;CAC/D,CAAC","sourcesContent":["import { getToken } from \"next-auth/jwt\";\nimport { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\nimport { store } from \"./store\";\nimport { getSession } from \"next-auth/react\";\n\nexport async function middleware(req: NextRequest) {\n  const token = await getToken({ req, secret: process.env.NEXTAUTH_SECRET });\n  const isProtected = req.nextUrl.pathname.startsWith(\"/dashboard\");\n\n  if (isProtected && !token) {\n    const url = new URL(\"/\", req.url);\n\n    return NextResponse.redirect(url);\n  }\n\n  if (!isProtected && token) {\n    return NextResponse.redirect(new URL(\"/dashboard\", req.url));\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: [\"/\", \"/articles\", \"/dashboard\", \"/dashboard/:path*\"],\n};\n"]}